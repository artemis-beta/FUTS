name: FORTRAN Unit Test Suite

on: [push]

jobs:
  build: 
    name: ${{ matrix.os }}
    runs-on: ${{ matrix.os }}
    strategy:
      fail-fast: false
      matrix:
        os: ['ubuntu-latest', 'macos-latest']
    
    steps:
      - uses: actions/checkout@v2
      - name: Install GFortran macOS
        run: brew install gfortran
        if: matrix.os == 'macos-latest'
      - name: Build Tests
        run: |
            cmake -Htests -Bbuild
            cmake --build build
      - name: Run Tests
        run: |
            for i in $(ls build/bin/*); do ./$i; done
